<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.example&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;TFG_BACK&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;/parent&gt;&#10;&#10;&#9;&lt;groupId&gt;com.evs&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;MicroserviceRegattaApi&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;MicroserviceRegattaApi&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;17&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.example&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;TFG_BACK&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;/parent&gt;&#10;&#10;&#9;&lt;groupId&gt;com.evs&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;MicroserviceRegattaApi&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;MicroserviceRegattaApi&lt;/name&gt;&#10;&#9;&lt;description&gt;Microservicio de gestión de regatas de catamaranes&lt;/description&gt;&#10;&#9;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;17&lt;/java.version&gt;&#10;&#9;&#9;&lt;spring-cloud.version&gt;2023.0.3&lt;/spring-cloud.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;!-- Spring Web --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Spring Data JPA --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Eureka Client --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Kafka --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Security --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- JWT --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- PostgreSQL --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;dependencyManagement&gt;&#10;&#9;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;${spring-cloud.version}&lt;/version&gt;&#10;&#9;&#9;&#9;&#9;&lt;type&gt;pom&lt;/type&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;import&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;/dependencies&gt;&#10;&#9;&lt;/dependencyManagement&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Boat.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Boat.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import java.math.BigDecimal;&#10;&#10;/**&#10; * Barco inscrito en regatas con su rating para handicap&#10; */&#10;@Data&#10;@Entity&#10;@Builder&#10;@Table(name = &quot;boats&quot;)&#10;@AllArgsConstructor&#10;@NoArgsConstructor&#10;public class Boat {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    @Column(nullable = false)&#10;    private String name;&#10;&#10;    @Column(name = &quot;sail_number&quot;, nullable = false, unique = true)&#10;    private String sailNumber;&#10;&#10;    @Column(name = &quot;boat_class&quot;, nullable = false)&#10;    private String boatClass;&#10;&#10;    @Column(precision = 6, scale = 3)&#10;    private BigDecimal rating;&#10;&#10;    @Column(name = &quot;auto_rating&quot;)&#10;    private Boolean autoRating = true;&#10;&#10;    @Column(name = &quot;owner_id&quot;)&#10;    private Long ownerId;&#10;&#10;    @Column(precision = 5, scale = 2)&#10;    private BigDecimal length;&#10;&#10;    @Column(precision = 5, scale = 2)&#10;    private BigDecimal beam;&#10;&#10;    @Column(name = &quot;sail_area&quot;, precision = 6, scale = 2)&#10;    private BigDecimal sailArea;&#10;&#10;    @Column(name = &quot;build_year&quot;)&#10;    private Integer buildYear;&#10;&#10;    @Column(length = 500)&#10;    private String notes;&#10;&#10;    @Column(name = &quot;photo_id&quot;)&#10;    private String photoId;&#10;&#10;    @PrePersist&#10;    @PreUpdate&#10;    public void calculateAutoRating() {&#10;        if (autoRating &amp;&amp; boatClass != null) {&#10;            this.rating = getDefaultRatingForClass(boatClass);&#10;        }&#10;    }&#10;&#10;    private BigDecimal getDefaultRatingForClass(String boatClass) {&#10;        return switch (boatClass.toUpperCase()) {&#10;            case &quot;HOBIE_16&quot; -&gt; new BigDecimal(&quot;0.950&quot;);&#10;            case &quot;CATAMARAN_F18&quot; -&gt; new BigDecimal(&quot;1.100&quot;);&#10;            case &quot;NACRA_17&quot; -&gt; new BigDecimal(&quot;1.050&quot;);&#10;            case &quot;NACRA_15&quot; -&gt; new BigDecimal(&quot;0.980&quot;);&#10;            case &quot;DART_16&quot; -&gt; new BigDecimal(&quot;0.900&quot;);&#10;            case &quot;TORNADO&quot; -&gt; new BigDecimal(&quot;1.150&quot;);&#10;            default -&gt; new BigDecimal(&quot;1.000&quot;);&#10;        };&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Race.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Race.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import java.time.LocalDateTime;&#10;&#10;/**&#10; * Manga (carrera) dentro de una regata&#10; */&#10;@Data&#10;@Entity&#10;@Builder&#10;@Table(name = &quot;races&quot;)&#10;@AllArgsConstructor&#10;@NoArgsConstructor&#10;public class Race {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    @ManyToOne(fetch = FetchType.LAZY)&#10;    @JoinColumn(name = &quot;regatta_id&quot;, nullable = false)&#10;    private Regatta regatta;&#10;&#10;    @Column(name = &quot;race_number&quot;, nullable = false)&#10;    private Integer raceNumber;&#10;&#10;    @Column(name = &quot;start_time&quot;)&#10;    private LocalDateTime startTime;&#10;&#10;    // PLANIFICADA, SEÑAL_PREPARATORIA, EN_CURSO, FINALIZADA, ABANDONADA&#10;    @Column(nullable = false)&#10;    private String status = &quot;PLANIFICADA&quot;;&#10;&#10;    @Column(name = &quot;wind_direction&quot;)&#10;    private Integer windDirection;&#10;&#10;    @Column(name = &quot;wind_speed&quot;)&#10;    private Double windSpeed;&#10;&#10;    @Column(name = &quot;number_of_laps&quot;)&#10;    private Integer numberOfLaps = 1;&#10;&#10;    @Column(name = &quot;course_type&quot;)&#10;    private String courseType;&#10;&#10;    @Column(length = 1000)&#10;    private String notes;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/RaceResult.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/RaceResult.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import java.math.BigDecimal;&#10;import java.time.LocalTime;&#10;&#10;/**&#10; * Resultado de un participante en una manga&#10; */&#10;@Data&#10;@Entity&#10;@Builder&#10;@Table(name = &quot;race_results&quot;)&#10;@AllArgsConstructor&#10;@NoArgsConstructor&#10;public class RaceResult {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    @ManyToOne(fetch = FetchType.LAZY)&#10;    @JoinColumn(name = &quot;race_id&quot;, nullable = false)&#10;    private Race race;&#10;&#10;    @ManyToOne(fetch = FetchType.LAZY)&#10;    @JoinColumn(name = &quot;participant_id&quot;, nullable = false)&#10;    private RegattaParticipant participant;&#10;&#10;    @Column(name = &quot;finish_time&quot;)&#10;    private LocalTime finishTime;&#10;&#10;    @Column(name = &quot;elapsed_seconds&quot;)&#10;    private Long elapsedSeconds;&#10;&#10;    @Column(name = &quot;corrected_seconds&quot;)&#10;    private Long correctedSeconds;&#10;&#10;    @Column(name = &quot;position&quot;)&#10;    private Integer position;&#10;&#10;    @Column(name = &quot;points&quot;)&#10;    private Integer points;&#10;&#10;    // FINISH, DNF, DNS, DSQ, OCS, BFD, UFD, RET&#10;    @Column(nullable = false)&#10;    private String status = &quot;FINISH&quot;;&#10;&#10;    @Column(name = &quot;penalty_points&quot;)&#10;    private Integer penaltyPoints = 0;&#10;&#10;    @Column(length = 500)&#10;    private String notes;&#10;&#10;    public void calculateCorrectedTime(BigDecimal rating) {&#10;        if (elapsedSeconds != null &amp;&amp; rating != null &amp;&amp; rating.compareTo(BigDecimal.ZERO) &gt; 0) {&#10;            BigDecimal corrected = new BigDecimal(elapsedSeconds).divide(rating, 0, java.math.RoundingMode.HALF_UP);&#10;            this.correctedSeconds = corrected.longValue();&#10;        }&#10;    }&#10;&#10;    public void assignPoints(int totalParticipants) {&#10;        this.points = switch (status.toUpperCase()) {&#10;            case &quot;FINISH&quot; -&gt; position != null ? position : totalParticipants + 1;&#10;            case &quot;DNF&quot;, &quot;RET&quot;, &quot;DNS&quot;, &quot;DSQ&quot;, &quot;OCS&quot;, &quot;BFD&quot;, &quot;UFD&quot; -&gt; totalParticipants + 1;&#10;            default -&gt; totalParticipants + 1;&#10;        };&#10;        this.points += penaltyPoints;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Regatta.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/Regatta.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import java.time.LocalDate;&#10;import java.time.LocalDateTime;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;/**&#10; * Regata de catamaranes&#10; */&#10;@Data&#10;@Entity&#10;@Builder&#10;@Table(name = &quot;regattas&quot;)&#10;@AllArgsConstructor&#10;@NoArgsConstructor&#10;public class Regatta {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    @Column(nullable = false)&#10;    private String name;&#10;&#10;    @Column(length = 1000)&#10;    private String description;&#10;&#10;    @Column(name = &quot;event_date&quot;, nullable = false)&#10;    private LocalDate eventDate;&#10;&#10;    @Column(name = &quot;registration_deadline&quot;)&#10;    private LocalDate registrationDeadline;&#10;&#10;    private String location;&#10;&#10;    // Estado: PLANIFICADA, INSCRIPCIONES_ABIERTAS, INSCRIPCIONES_CERRADAS, EN_CURSO, FINALIZADA, CANCELADA&#10;    @Column(nullable = false)&#10;    private String status = &quot;PLANIFICADA&quot;;&#10;&#10;    @Column(name = &quot;max_participants&quot;)&#10;    private Integer maxParticipants;&#10;&#10;    @Column(name = &quot;registration_fee&quot;)&#10;    private Double registrationFee;&#10;&#10;    @Column(name = &quot;planned_races&quot;)&#10;    private Integer plannedRaces = 3;&#10;&#10;    @Column(name = &quot;created_by&quot;, nullable = false)&#10;    private Long createdBy;&#10;&#10;    @Column(name = &quot;created_at&quot;)&#10;    private LocalDateTime createdAt;&#10;&#10;    @Column(length = 2000)&#10;    private String notes;&#10;&#10;    @ElementCollection&#10;    @CollectionTable(name = &quot;regatta_staff&quot;, joinColumns = @JoinColumn(name = &quot;regatta_id&quot;))&#10;    @Column(name = &quot;teacher_id&quot;)&#10;    private List&lt;Long&gt; staffIds = new ArrayList&lt;&gt;();&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/RegattaParticipant.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Entities/RegattaParticipant.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Entities;&#10;&#10;import jakarta.persistence.*;&#10;import lombok.AllArgsConstructor;&#10;import lombok.Builder;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;/**&#10; * Participante inscrito en una regata&#10; */&#10;@Data&#10;@Entity&#10;@Builder&#10;@Table(name = &quot;regatta_participants&quot;)&#10;@AllArgsConstructor&#10;@NoArgsConstructor&#10;public class RegattaParticipant {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    private Long id;&#10;&#10;    @ManyToOne(fetch = FetchType.LAZY)&#10;    @JoinColumn(name = &quot;regatta_id&quot;, nullable = false)&#10;    private Regatta regatta;&#10;&#10;    @ManyToOne(fetch = FetchType.LAZY)&#10;    @JoinColumn(name = &quot;boat_id&quot;, nullable = false)&#10;    private Boat boat;&#10;&#10;    @Column(name = &quot;skipper_id&quot;, nullable = false)&#10;    private Long skipperId;&#10;&#10;    @Column(name = &quot;skipper_name&quot;)&#10;    private String skipperName;&#10;&#10;    @ElementCollection&#10;    @CollectionTable(name = &quot;participant_crew&quot;, joinColumns = @JoinColumn(name = &quot;participant_id&quot;))&#10;    @Column(name = &quot;crew_member_id&quot;)&#10;    private List&lt;Long&gt; crewIds = new ArrayList&lt;&gt;();&#10;&#10;    @ElementCollection&#10;    @CollectionTable(name = &quot;participant_crew_names&quot;, joinColumns = @JoinColumn(name = &quot;participant_id&quot;))&#10;    @Column(name = &quot;crew_name&quot;)&#10;    private List&lt;String&gt; crewNames = new ArrayList&lt;&gt;();&#10;&#10;    @Column(name = &quot;registration_date&quot;)&#10;    private LocalDateTime registrationDate;&#10;&#10;    @Column(nullable = false)&#10;    private String status = &quot;INSCRITO&quot;;&#10;&#10;    @Column(name = &quot;fee_paid&quot;)&#10;    private Boolean feePaid = false;&#10;&#10;    @Column(name = &quot;payment_id&quot;)&#10;    private Long paymentId;&#10;&#10;    @Column(name = &quot;total_points&quot;)&#10;    private Integer totalPoints = 0;&#10;&#10;    @Column(name = &quot;final_position&quot;)&#10;    private Integer finalPosition;&#10;&#10;    @Column(length = 500)&#10;    private String notes;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/MicroserviceRegattaApiApplication.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/MicroserviceRegattaApiApplication.java" />
              <option name="originalContent" value="package com.evs.MicroserviceRegattaApi;&#10;&#10;import org.springframework.boot.SpringApplication;&#10;import org.springframework.boot.autoconfigure.SpringBootApplication;&#10;&#10;@SpringBootApplication&#10;public class MicroserviceRegattaApiApplication {&#10;&#10;&#9;public static void main(String[] args) {&#10;&#9;&#9;SpringApplication.run(MicroserviceRegattaApiApplication.class, args);&#10;&#9;}&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi;&#10;&#10;import org.springframework.boot.SpringApplication;&#10;import org.springframework.boot.autoconfigure.SpringBootApplication;&#10;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;&#10;&#10;@EnableDiscoveryClient&#10;@SpringBootApplication&#10;public class MicroserviceRegattaApiApplication {&#10;&#10;&#9;public static void main(String[] args) {&#10;&#9;&#9;SpringApplication.run(MicroserviceRegattaApiApplication.class, args);&#10;&#9;}&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/BoatRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/BoatRepository.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Repository;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Boat;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;@Repository&#10;public interface BoatRepository extends JpaRepository&lt;Boat, Long&gt; {&#10;&#10;    Optional&lt;Boat&gt; findBySailNumber(String sailNumber);&#10;&#10;    List&lt;Boat&gt; findByOwnerId(Long ownerId);&#10;&#10;    List&lt;Boat&gt; findByBoatClass(String boatClass);&#10;&#10;    boolean existsBySailNumber(String sailNumber);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RaceRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RaceRepository.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Repository;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Race;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.util.List;&#10;&#10;@Repository&#10;public interface RaceRepository extends JpaRepository&lt;Race, Long&gt; {&#10;&#10;    List&lt;Race&gt; findByRegattaIdOrderByRaceNumberAsc(Long regattaId);&#10;&#10;    List&lt;Race&gt; findByRegattaIdAndStatus(Long regattaId, String status);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RaceResultRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RaceResultRepository.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Repository;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.RaceResult;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.data.jpa.repository.Query;&#10;import org.springframework.data.repository.query.Param;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.util.List;&#10;&#10;@Repository&#10;public interface RaceResultRepository extends JpaRepository&lt;RaceResult, Long&gt; {&#10;&#10;    List&lt;RaceResult&gt; findByRaceIdOrderByPositionAsc(Long raceId);&#10;&#10;    List&lt;RaceResult&gt; findByParticipantId(Long participantId);&#10;&#10;    @Query(&quot;SELECT rr FROM RaceResult rr WHERE rr.race.id = :raceId ORDER BY rr.correctedSeconds ASC NULLS LAST&quot;)&#10;    List&lt;RaceResult&gt; findByRaceIdOrderByCorrectedTime(@Param(&quot;raceId&quot;) Long raceId);&#10;&#10;    @Query(&quot;SELECT SUM(rr.points) FROM RaceResult rr WHERE rr.participant.id = :participantId&quot;)&#10;    Integer sumPointsByParticipant(@Param(&quot;participantId&quot;) Long participantId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RegattaParticipantRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RegattaParticipantRepository.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Repository;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.RegattaParticipant;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.data.jpa.repository.Query;&#10;import org.springframework.data.repository.query.Param;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;@Repository&#10;public interface RegattaParticipantRepository extends JpaRepository&lt;RegattaParticipant, Long&gt; {&#10;&#10;    List&lt;RegattaParticipant&gt; findByRegattaId(Long regattaId);&#10;&#10;    List&lt;RegattaParticipant&gt; findBySkipperId(Long skipperId);&#10;&#10;    List&lt;RegattaParticipant&gt; findByBoatId(Long boatId);&#10;&#10;    Optional&lt;RegattaParticipant&gt; findByRegattaIdAndBoatId(Long regattaId, Long boatId);&#10;&#10;    @Query(&quot;SELECT p FROM RegattaParticipant p WHERE p.regatta.id = :regattaId ORDER BY p.totalPoints ASC&quot;)&#10;    List&lt;RegattaParticipant&gt; findByRegattaIdOrderByTotalPoints(@Param(&quot;regattaId&quot;) Long regattaId);&#10;&#10;    long countByRegattaId(Long regattaId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RegattaRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Repository/RegattaRepository.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Repository;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Regatta;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;@Repository&#10;public interface RegattaRepository extends JpaRepository&lt;Regatta, Long&gt; {&#10;&#10;    List&lt;Regatta&gt; findByStatus(String status);&#10;&#10;    List&lt;Regatta&gt; findByEventDateAfterOrderByEventDateAsc(LocalDate date);&#10;&#10;    List&lt;Regatta&gt; findByEventDateBetween(LocalDate start, LocalDate end);&#10;&#10;    List&lt;Regatta&gt; findByCreatedBy(Long userId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IBoatService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IBoatService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Boat;&#10;&#10;import java.util.List;&#10;&#10;/**&#10; * Interfaz para la gestión de barcos (Single Responsibility)&#10; */&#10;public interface IBoatService {&#10;&#10;    Boat create(Boat boat);&#10;&#10;    Boat update(Long id, Boat boat);&#10;&#10;    Boat findById(Long id);&#10;&#10;    Boat findBySailNumber(String sailNumber);&#10;&#10;    List&lt;Boat&gt; findAll();&#10;&#10;    List&lt;Boat&gt; findByOwner(Long ownerId);&#10;&#10;    List&lt;Boat&gt; findByClass(String boatClass);&#10;&#10;    void delete(Long id);&#10;&#10;    boolean existsBySailNumber(String sailNumber);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IClassificationService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IClassificationService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;/**&#10; * Interfaz para el cálculo de clasificaciones (Single Responsibility)&#10; */&#10;public interface IClassificationService {&#10;&#10;    /**&#10;     * Calcula las posiciones tras finalizar una manga&#10;     */&#10;    void calculateRacePositions(Long raceId);&#10;&#10;    /**&#10;     * Actualiza los puntos totales de todos los participantes de una regata&#10;     */&#10;    void updateTotalPoints(Long regattaId);&#10;&#10;    /**&#10;     * Calcula la clasificación final de la regata&#10;     */&#10;    void calculateFinalClassification(Long regattaId);&#10;&#10;    /**&#10;     * Aplica descarte si hay suficientes mangas&#10;     */&#10;    void applyDiscards(Long regattaId, int numberOfDiscards);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IParticipantService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IParticipantService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.RegattaParticipant;&#10;&#10;import java.util.List;&#10;&#10;/**&#10; * Interfaz para la gestión de participantes en regatas (Single Responsibility)&#10; */&#10;public interface IParticipantService {&#10;&#10;    RegattaParticipant register(Long regattaId, Long boatId, Long skipperId,&#10;                                 List&lt;Long&gt; crewIds, List&lt;String&gt; crewNames);&#10;&#10;    RegattaParticipant confirm(Long participantId);&#10;&#10;    RegattaParticipant withdraw(Long participantId);&#10;&#10;    RegattaParticipant findById(Long id);&#10;&#10;    List&lt;RegattaParticipant&gt; findByRegatta(Long regattaId);&#10;&#10;    List&lt;RegattaParticipant&gt; findBySkipper(Long skipperId);&#10;&#10;    List&lt;RegattaParticipant&gt; getClassification(Long regattaId);&#10;&#10;    void updateTotalPoints(Long participantId, Integer points);&#10;&#10;    void setFinalPosition(Long participantId, Integer position);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRaceResultService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRaceResultService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.RaceResult;&#10;&#10;import java.util.List;&#10;&#10;/**&#10; * Interfaz para la gestión de resultados de mangas (Single Responsibility)&#10; */&#10;public interface IRaceResultService {&#10;&#10;    RaceResult recordFinish(Long raceId, Long participantId, Long elapsedSeconds);&#10;&#10;    RaceResult recordDNF(Long raceId, Long participantId, String reason);&#10;&#10;    RaceResult recordDNS(Long raceId, Long participantId, String reason);&#10;&#10;    RaceResult recordDSQ(Long raceId, Long participantId, String reason);&#10;&#10;    RaceResult recordOCS(Long raceId, Long participantId);&#10;&#10;    RaceResult findById(Long id);&#10;&#10;    List&lt;RaceResult&gt; findByRace(Long raceId);&#10;&#10;    List&lt;RaceResult&gt; findByParticipant(Long participantId);&#10;&#10;    void calculatePositions(Long raceId);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRaceService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRaceService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Race;&#10;&#10;import java.util.List;&#10;&#10;/**&#10; * Interfaz para la gestión de mangas (Single Responsibility)&#10; */&#10;public interface IRaceService {&#10;&#10;    Race create(Long regattaId, Integer raceNumber);&#10;&#10;    Race start(Long raceId, Integer windDirection, Double windSpeed);&#10;&#10;    Race finish(Long raceId);&#10;&#10;    Race abandon(Long raceId, String reason);&#10;&#10;    Race findById(Long id);&#10;&#10;    List&lt;Race&gt; findByRegatta(Long regattaId);&#10;&#10;    List&lt;Race&gt; findByRegattaAndStatus(Long regattaId, String status);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRegattaService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/java/com/evs/MicroserviceRegattaApi/Service/Inter/IRegattaService.java" />
              <option name="updatedContent" value="package com.evs.MicroserviceRegattaApi.Service.Inter;&#10;&#10;import com.evs.MicroserviceRegattaApi.Entities.Regatta;&#10;&#10;import java.util.List;&#10;&#10;/**&#10; * Interfaz para la gestión de regatas (Single Responsibility)&#10; */&#10;public interface IRegattaService {&#10;&#10;    Regatta create(Regatta regatta, Long createdBy);&#10;&#10;    Regatta update(Long id, Regatta regatta);&#10;&#10;    Regatta findById(Long id);&#10;&#10;    List&lt;Regatta&gt; findAll();&#10;&#10;    List&lt;Regatta&gt; findUpcoming();&#10;&#10;    List&lt;Regatta&gt; findByStatus(String status);&#10;&#10;    void delete(Long id);&#10;&#10;    Regatta openRegistrations(Long regattaId);&#10;&#10;    Regatta closeRegistrations(Long regattaId);&#10;&#10;    Regatta start(Long regattaId);&#10;&#10;    Regatta finish(Long regattaId);&#10;&#10;    Regatta assignStaff(Long regattaId, List&lt;Long&gt; staffIds);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/resources/application.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MicroserviceRegattaApi/src/main/resources/application.yml" />
              <option name="updatedContent" value="server:&#10;  port: 8085&#10;&#10;spring:&#10;  application:&#10;    name: msvc-regatta&#10;  datasource:&#10;    driver-class-name: org.postgresql.Driver&#10;    url: jdbc:postgresql://localhost:5432/tfgdb&#10;    username: postgres&#10;    password: curso&#10;  jpa:&#10;    hibernate:&#10;      ddl-auto: update&#10;    show-sql: true&#10;    database: postgresql&#10;    database-platform: org.hibernate.dialect.PostgreSQLDialect&#10;  kafka:&#10;    bootstrap-servers: localhost:29092&#10;    consumer:&#10;      group-id: regatta-group&#10;      auto-offset-reset: earliest&#10;      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer&#10;      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer&#10;      properties:&#10;        spring.json.trusted.packages: &quot;*&quot;&#10;    producer:&#10;      key-serializer: org.apache.kafka.common.serialization.StringSerializer&#10;      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer&#10;&#10;jwt:&#10;  secret: RVZTX0xhQW50aWxsYV9TZWNyZXRLZXlfMjAyNF9URkdfU2FpbGluZ1NjaG9vbF9KV1RfVG9rZW5fS2V5&#10;  expiration: 86400000&#10;&#10;eureka:&#10;  instance:&#10;    hostname: localhost&#10;  client:&#10;    service-url:&#10;      defaultZone: http://localhost:8761/eureka/&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>